<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <style>
        .site_header {
            position: absolute;
            display: flex;
            top: 0px;
            left: 0px;
            width:100%;
            height: 90px;
            box-shadow: 0px 3px 2px #bbbbbb;
        }
        .site_logo {
            width: 80px;
            padding: 5px 5px 5px 5px;
        }
        .site_name {
            height: 90px;
            width: 2000px;
        }
        .body_offset {
            position: absolute;
            top: 90px;
        }
        .body_container {
            display: flex;
        }
        .body_content {
            padding-top: 5px;
        }
        .body_left_side {
            width: 150px;
            height: 500px;
            border-right: 1px solid black;
        }
        .body_center {
            padding-left: 10px;
        }
        .menu_group {
        }
        .menu_indicator {
            flex: 1;
            min-width: 1em;
            color: blue;
            font-size: larger;
        }
        .menu_text {
            width: 100%;
            height: 100%;
        }
        .menu_item {
            padding-left: 1.5em;
        }
    </style>
</head>

<body>
    <div class="site_header">
        <img class="site_logo" src="https://github.com/az-digitalag/Drone-Processing-Pipeline/raw/07b1edc34a1faea501c80f583beb07f9d6b290bb/resources/drone-pipeline.png" alt="Drone Processing Pipeline logo"/>
        <div class="site_name">
            <h1>Drone Processing Pipeline</h1>
        </div>
    </div>
    <div class="body_offset body_container">
        <div class="body_left_side">
            <div class="body_content">
                <div id="menus"></div>
            </div>
        </div>
        <div class="body_center">
            <div class="body_content"> HI</div>
        </div>
    </div>

    <!-- Load React. -->
    <!-- Note: when deploying, replace "development.js" with "production.min.js". -->
    <script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js" crossorigin></script>

    <script type="text/babel">
'use strict'

/* This module assumes React has been loaded */

/*
 * This class presents a collapsable menu
 */
class DPPMenu extends React.Component {
    constructor(props) {
        super(props);
        let css_class = props.css_class || "menu_group";
        let css_indicator = props.css_indicator_class || "menu_indicator";
        let css_menu = props.css_group_text_class || "menu_text"
        let menu_name = props.name || "menu group";
        let is_opened = props.open || false;
        let menu_items = props.items || [];

        this.changeOpenState = this.changeOpenState.bind(this);

        this.state = {"css_class": css_class,
                      "css_indicator": css_indicator,
                      "css_menu_text": css_menu,
                      "menu_name": menu_name,
                      "opened": is_opened, 
                      "items": menu_items
                     };
    }

    changeOpenState() {
        this.setState({"opened": !this.state.opened});
    }

    _emptyDiv() {
        return (<div/>);
    }

    _generateItems() {
        if (this.state.items.size <= 0) 
            return this._emptyDiv();

        return (this.state.items.map((item) => {
                let item_css = item.css_class || "menu_item";
                let item_name = item.name || "menu item";
                let handler = item.click;
                return (<div className={item_css} key={item_name} onClick={handler}>{item_name}</div>)
            })
        );
    }

    render() {
        let open_indicator = (this.state.opened && "-") || "+";
        let menu_items = (!this.state.opened && this._emptyDiv()) || this._generateItems();
        return (
            <div className={this.state.css_class}>
                <div style={{display:'flex',flexDirection:'row',alignItems:'center'}} onClick={this.changeOpenState}>
                    <div className={this.state.css_indicator}>{open_indicator}</div>
                    <div className={this.state.css_menu_text}>{this.state.menu_name}</div>
                </div>
                {menu_items}
            </div>
        );
    }
}
function noticeMenuClick(notice_id) {
    
}
ReactDOM.render(
  <DPPMenu name="Notices" items={[{name:'one', click: ()=>noticeMenuClick("One")},
                                  {name:'two', click: ()=>noticeMenuClick("Two")}]}/>,
  document.getElementById('menus')
);
    </script>
</body>
</html>